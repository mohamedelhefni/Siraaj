<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siraaj Analytics - Vue Example</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }

        .card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        button {
            background: #42b883;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #35495e;
        }

        .info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div id="app">
        <h1>ðŸŽ¯ Siraaj Analytics - Vue Example</h1>

        <div class="card">
            <h2>User Identity</h2>
            <div class="info">
                User ID: {{ userId || 'Not set' }}
            </div>
            <button @click="identifyUser">Identify User</button>
        </div>

        <div class="card">
            <h2>Track Events</h2>
            <button @click="track('button_clicked', { button: 'primary' })">
                Track Click
            </button>
            <button @click="track('feature_used', { feature: 'analytics' })">
                Track Feature Use
            </button>
            <button @click="track('purchase', { amount: 99.99, currency: 'USD' })">
                Track Purchase
            </button>
        </div>

        <div class="card">
            <h2>Recent Events</h2>
            <p v-if="events.length === 0">No events tracked yet</p>
            <div v-else>
                <div v-for="(event, i) in recentEvents" :key="i" class="info" style="margin-bottom: 10px">
                    <strong>{{ event.event }}</strong><br />
                    {{ JSON.stringify(event.properties, null, 2) }}<br />
                    <small>{{ event.timestamp }}</small>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const userId = ref('');
                const events = ref([]);

                const recentEvents = computed(() => {
                    return events.value.slice(-5).reverse();
                });

                const track = (event, properties) => {
                    const eventData = {
                        event,
                        properties,
                        timestamp: new Date().toISOString(),
                    };
                    events.value.push(eventData);
                    console.log('Event tracked:', eventData);
                };

                const identifyUser = () => {
                    const id = 'user-' + Math.random().toString(36).substr(2, 9);
                    userId.value = id;
                    track('identify', { userId: id });
                };

                return {
                    userId,
                    events,
                    recentEvents,
                    track,
                    identifyUser,
                    JSON,
                };
            },
        }).mount('#app');
    </script>
</body>

</html>